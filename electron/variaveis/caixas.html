<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="../sweetalert/sweetalert.js"></script>
    <script src="../telaInicial/dialogos.js"></script>
    <script src="./perguntas.js"></script>

    <title>Caixas</title>
    <link rel="stylesheet" href="../css/unowmsFase.css">

</head>

<body>

    <audio id="audio" src="../sounds/variaveis.mp3" loop autoplay></audio>


    <div style="padding: 1vw;" class="titulo">
        <h3>Informe o tipo de variavel dentro da caixa, arrastando as DigiLetras</h3>
    </div>



    <div class="caixaConteudo">
        <img src="../img/unowns/caixa.png">
        <div class="textoCaixa">
            <h2 style="font-weight: bold; font-size: 1.1vw;" id="alterar"></h2></img>
        </div>
    </div>

    <div class="tela">

        <div class="teclado">


            <div class="letras1">
                <h6>I N T E I R O</h6>
                <img class="I" style="width:10%;" id="inteiro" style="width: 4vw;" src="../img/unowns/I.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="N" style="width:10%;" id="inteiro" style="width: 4.5vw;" src="../img/unowns/N.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="T" style="width:10%;" id="inteiro" style="width: 2.5vw;" src="../img/unowns/T.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="E" style="width:10%;" id="inteiro" style="width: 4vw;" src="../img/unowns/E.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="I" style="width:10%;" id="inteiro" style="width: 4vw;" src="../img/unowns/I.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="R" style="width:10%;" id="inteiro" style="width: 3.5vw;" src="../img/unowns/R.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="O" style="width:10%;" id="inteiro" style="width: 3.6vw;" src="../img/unowns/O.png"
                    ondragstart="itemSelecionado(event)"></img>
            </div>





            <div class="letras2">
                <h6>D E C I M A L</h6>
                <img class="D" style="width:10%;" id="decimal" style="width: 3.5vw;" src="../img/unowns/D.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="E" style="width:10%;" id="decimal" style="width: 4vw;" src="../img/unowns/E.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="C" style="width:10%;" id="decimal" style="width: 4vw;" src="../img/unowns/C.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="I" style="width:10%;" id="decimal" style="width: 4vw;" src="../img/unowns/I.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="M" style="width:10%;" id="decimal" style="width: 3.3vw;" src="../img/unowns/M.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="A" style="width:10%;" id="decimal" style="width: 4vw;" src="../img/unowns/A.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="L" style="width:10%;" id="decimal" style="width: 4vw;" src="../img/unowns/L.png"
                    ondragstart="itemSelecionado(event)"></img>
            </div>


            <div class="letras3">
                <h6>B O O L E A N O</h6>
                <img class="B" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/unowns/B.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="O" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/unowns/O.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="O" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/unowns/O.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="L" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/unowns/L.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="E" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/unowns/E.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="A" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/unowns/A.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="N" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/unowns/N.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="O" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/unowns/O.png"
                    ondragstart="itemSelecionado(event)"></img>

            </div>


            <div class="letras4">
                <h6>P A L A V R A</h6>
                <img class="P" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/unowns/P.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="A" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/unowns/A.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="L" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/unowns/L.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="A" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/unowns/A.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="V" style="width:10%;" id="palavra" style="width: 3vw;" src="../img/unowns/V.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="R" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/unowns/R.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="A" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/unowns/A.png"
                    ondragstart="itemSelecionado(event)"></img>
            </div>


            <div class="letras5">
                <h6>L E T R A</h6>
                <img class="L" style="width:13%;" id="letra" style="width: 4vw;" src="../img/unowns/L.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="E" style="width:13%;" id="letra" style="width: 4vw;" src="../img/unowns/E.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="T" style="width:13%;" id="letra" style="width: 2.5vw;" src="../img/unowns/T.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="R" style="width:13%;" id="letra" style="width: 4vw;" src="../img/unowns/R.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="A" style="width:13%;" id="letra" style="width: 4vw;" src="../img/unowns/A.png"
                    ondragstart="itemSelecionado(event)"></img>
            </div>

        </div>


        <div>
            <div class="caixaResposta" id="caixaResposta" ondragover="areaSoltar(event)" ondrop="soltarElemento(event)">
                <div id="slot1" class="filhoCaixaS"></div>

            </div>
            <button id="botaoResposta" onclick="limparUnowns('slot1')">Apagar</button>
            <button id="botaoResposta"
                onclick="verificaTipo(document.getElementById('slot1').innerHTML)">Enviar</button>

        </div>

        <div class="inicial">
            <h6>Ajuda</h6>
            <img src="../img/unowns/help.png" id="inicial" onclick="exibeAjuda()" style="cursor:pointer">
            <h2 id="ajuda" style="display:none">Inteiro = Números Inteiros <br><br>Decimal = Números Com Virgula
                <br><br>Palavra = Texto<br><br>Booleano = Verdadeiro Ou Falso <br><br>Letra = Letras
            </h2>
        </div>




    </div>


    <div style="z-index: -1;" class="alfabeto">

        <img class="A" id="A" src="../img/unowns/A.png"> </img>
        <img class="B" id="B" src="../img/unowns/B.png"></img>
        <img class="C" id="C" src="../img/unowns/C.png"></img>
        <img class="D" id="D" src="../img/unowns/D.png"></img>
        <img class="E" id="E" src="../img/unowns/E.png"></img>
        <img class="F" id="F" src="../img/unowns/F.png"></img>
        <img class="G" id="G" src="../img/unowns/G.png"></img>
        <img class="H" id="H" src="../img/unowns/H.png"></img>
        <img class="I" id="I" src="../img/unowns/I.png"></img>
        <img class="J" id="J" src="../img/unowns/J.png"></img>
        <img class="K" id="K" src="../img/unowns/K.png"></img>
        <img class="L" id="L" src="../img/unowns/L.png"></img>
        <img class="M" id="M" src="../img/unowns/M.png"></img>
        <img class="N" id="N" src="../img/unowns/N.png"></img>
        <img class="O" id="O" src="../img/unowns/O.png"></img>
        <img class="P" id="P" src="../img/unowns/P.png"></img>
        <img class="Q" id="Q" src="../img/unowns/Q.png"></img>
        <img class="R" id="R" src="../img/unowns/R.png"></img>
        <img class="S" id="S" src="../img/unowns/S.png"></img>
        <img class="T" id="T" src="../img/unowns/T.png"></img>
        <img class="U" id="U" src="../img/unowns/U.png"></img>
        <img class="V" id="V" src="../img/unowns/V.png"></img>
        <img class="W" id="W" src="../img/unowns/W.png"></img>
        <img class="X" id="X" src="../img/unowns/X.png"></img>
        <img class="Y" id="Y" src="../img/unowns/Y.png"></img>
        <img class="Z" id="Z" src="../img/unowns/Z.png"></img>
    </div>

</body>

</html>



<script>


    // Criar um vetor com números de 1 a 21
    var vetorPerguntas = Array.from({ length: 7 }, (_, index) => index + 0);
    // Embaralhar o vetor
    vetorPerguntas.sort(() => Math.random() - 0.5);

    var idPergunta = 0;  //inicia id como 0 para pegar a primeira pergunta no vetor de perguntas

    carregarPergunta();

    function carregarPergunta() {
        // pega a primeira pergunta do vetor embaralhada pela variavel vetorPerguntas e a exibe ao jogador
        document.getElementById("alterar").innerText = perguntas[vetorPerguntas[idPergunta]].question;
    }

    const itemSelecionado = (event) => {  //realiza a captura do item selecionado pelo usuario
        event.dataTransfer.setData("img", event.target.id);
    }

    const areaSoltar = (event) => { //verifica se o item foi solto em um local permitido
        event.preventDefault();
    }

    const soltarElemento = (event) => {  //solta o elemento no local designado
        event.preventDefault();

        var imagem = event.dataTransfer.getData("img");
        var imagensLetras = "";

        if (imagem == "inteiro") {
            imagensLetras = document.querySelectorAll('.letras1 img');
        } else if (imagem == "decimal") {
            imagensLetras = document.querySelectorAll('.letras2 img');
        } else if (imagem == "booleano") {
            imagensLetras = document.querySelectorAll('.letras3 img');
        } else if (imagem == "palavra") {
            imagensLetras = document.querySelectorAll('.letras4 img');
        } else {
            imagensLetras = document.querySelectorAll('.letras5 img');
        }
        const slot1 = document.getElementById("slot1");

        const contenedorImagens = document.createElement("div");

        contenedorImagens.style.display = "flex";

        // Adiciona cada imagem ao contêiner flexível
        imagensLetras.forEach((imagem, index) => {
            const novaImagem = document.createElement("img");
            novaImagem.src = '../img/unowns/' + imagem.classList[0] + '.png';
            novaImagem.className = imagem.classList[0];
            contenedorImagens.appendChild(novaImagem);
        });

        slot1.appendChild(contenedorImagens);

    }

    const limparUnowns = (k) => { //funcao para limpar a resposta apos ser enviada

        var elemento = document.querySelectorAll("#slot1" + " img");

        elemento.forEach(function (elemento) {
            if (elemento.parentNode) {
                elemento.parentNode.removeChild(elemento);
            }
        });

        if(elemento.length === 0){
                exibeNotificação("error", "Nada para apagar!", "");
        }

    }

    const verificaTipo = (valor) => {  //verifica se as respostas informadas estão certas
        console.log(valor)
        if (idPergunta == 6) {   //verifica se o usuario chegou ao final da fase
            exibeNotificação("success", "Você concluiu a fase! Vamos as perguntas da fase!", '../Quizes/quizEntreFases.html?fase=1');
            return;
        }

        var tipoCaixa = perguntas[vetorPerguntas[idPergunta]].answers[0].option.trim();

        switch (tipoCaixa) {
            case 'inteiro':
                if (valor.includes('class="I"') && valor.includes('class="N"') && valor.includes('class="T"')) { //caso a resposta esteja certa, exibe que a respota esta certa e limpa o campo de resposta 
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparUnowns("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta(); //carrega a proxima pergunta
                } else { //caso a resposta esteja errada, informa ao usuario e limpa o campo de resposta
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparUnowns("slot1");
                }
                break;

            case 'palavra':
                if (valor.includes('class="P"')) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparUnowns("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparUnowns("slot1");
                }
                break;

            case 'booleano':
                if (valor.includes('class="B"')) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparUnowns("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparUnowns("slot1");
                }
                break;

            case 'letra':
                if (valor.includes('class="L"') && valor.includes('class="E"') && valor.includes('class="T"')) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparUnowns("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparUnowns("slot1");
                }
                break;

            case 'decimal':
                console.log(valor)
                if (valor.includes('class="D"')) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparUnowns("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparUnowns("slot1");
                }
                break;

            default:
                exibeNotificação("error", "Os dados podem ter sido inseridos incorretamente na area do professor!", "");
                limparUnowns("slot1");
        }
    }

    const exibeAjuda = () => { //abre a guia de ajuda para auxiliar o usuario
        if (document.querySelector("#ajuda").style.display == "block") {
            document.querySelector("#ajuda").style.display = "none";
        } else {
            document.querySelector("#ajuda").style.display = "block";
        }
    }

    //captura os unowns que ficaram espalhados pela fase e os coloca em posições aleatorias da tela
    const alfabeto = document.querySelectorAll('.A, .B, .C, .D, .E, .F, .G, .H, .I, .J, .K, .L, .M, .N, .O, .P, .Q, .R, .S, .T, .U, .V, .W, .X, .Y, .Z');

    for (var l = 0; l < alfabeto.length; l++) {

        const posicaoLeft = ["5", "10", "15", "20", "25", "30", "40", "42", "58", "60", "64", "68", "70", "74", "78", "80", "84", "88", "90", "94"];
        const posicaoBottom = ["5", "10", "15", "18", "20", "23", "25", "28", "65", "70", "75", "80", "85", "90"];

        const posicaoL = Math.floor(Math.random() * posicaoLeft.length);
        const posicaoB = Math.floor(Math.random() * posicaoBottom.length);

        if (+posicaoLeft[posicaoL] < 30) { //gera novamente caso o bottom posicione os Unows dentro do teclado de Unows
            const novaPosB = ["0", "93"];

            const posB = Math.floor(Math.random() * novaPosB.length);

            alfabeto[l].style.left = posicaoLeft[posicaoL] + "%";
            alfabeto[l].style.bottom = novaPosB[posB] + "%";

        } else {
            alfabeto[l].style.left = posicaoLeft[posicaoL] + "%";
            alfabeto[l].style.bottom = posicaoBottom[posicaoB] + "%";
        }
    }

    //funcao para verificar se o usuario clicou na tecla 'Esc' para retornar ao menu de fases
    const voltar_menu = () => {
        var tecla = event.keyCode;


        if (tecla == 27) {
            window.location.href = '../telaInicial/city.html';
        }
    }
    document.addEventListener('keydown', voltar_menu);
</script>