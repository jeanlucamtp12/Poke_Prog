<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="../sweetalert/sweetalert.js"></script>
    <script src="../telaInicial/dialogos.js"></script>
    <script src="./perguntas.js"></script>

    <title>Caixas</title>
    <link rel="stylesheet" href="../css/variaveis.css">

</head>

<body>

    <audio id="audio" src="../sounds/variaveis.mp3" loop autoplay></audio>


    <div style="padding: 1vw;" class="titulo">
        <h3>Informe o tipo de variavel dentro da caixa, arrastando ou clicando nas DigiLetras</h3>
    </div>



    <div class="caixaConteudo">
        <img src="../img/variaveis/caixa.png">
        <div class="textoCaixa">
            <h2 style="font-weight: bold; font-size: 1.1vw;" id="alterar"></h2></img>
        </div>
    </div>

    <div class="tela">

        <div class="teclado">


            <div class="letras1" onclick="soltarElemento('inteiro')">
                <h6>I N T E I R O</h6>
                <img class="i" style="width:10%;" id="inteiro" style="width: 4vw;" src="../img/variaveis/i.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="n" style="width:10%;" id="inteiro" style="width: 4.5vw;" src="../img/variaveis/n.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="t" style="width:10%;" id="inteiro" style="width: 2.5vw;" src="../img/variaveis/t.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="e" style="width:10%;" id="inteiro" style="width: 4vw;" src="../img/variaveis/e.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="i" style="width:10%;" id="inteiro" style="width: 4vw;" src="../img/variaveis/i.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="r" style="width:10%;" id="inteiro" style="width: 3.5vw;" src="../img/variaveis/r.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="o" style="width:10%;" id="inteiro" style="width: 3.6vw;" src="../img/variaveis/o.png"
                    ondragstart="itemSelecionado(event)"></img>
            </div>





            <div class="letras2" onclick="soltarElemento('decimal')">
                <h6>D E C I M A L</h6>
                <img class="d" style="width:10%;" id="decimal" style="width: 3.5vw;" src="../img/variaveis/d.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="e" style="width:10%;" id="decimal" style="width: 4vw;" src="../img/variaveis/e.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="c" style="width:10%;" id="decimal" style="width: 4vw;" src="../img/variaveis/c.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="i" style="width:10%;" id="decimal" style="width: 4vw;" src="../img/variaveis/i.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="m" style="width:10%;" id="decimal" style="width: 3.3vw;" src="../img/variaveis/m.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="a" style="width:10%;" id="decimal" style="width: 4vw;" src="../img/variaveis/a.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="l" style="width:10%;" id="decimal" style="width: 4vw;" src="../img/variaveis/l.png"
                    ondragstart="itemSelecionado(event)"></img>
            </div>


            <div class="letras3" onclick="soltarElemento('booleano')">
                <h6>B O O L E A N O</h6>
                <img class="b" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/variaveis/b.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="o" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/variaveis/o.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="o" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/variaveis/o.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="l" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/variaveis/l.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="e" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/variaveis/e.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="a" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/variaveis/a.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="n" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/variaveis/n.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="o" style="width:10%;" id="booleano" style="width: 4vw;" src="../img/variaveis/o.png"
                    ondragstart="itemSelecionado(event)"></img>

            </div>


            <div class="letras4" onclick="soltarElemento('palavra')">
                <h6>P A L A V R A</h6>
                <img class="p" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/variaveis/p.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="a" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/variaveis/a.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="l" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/variaveis/l.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="a" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/variaveis/a.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="v" style="width:10%;" id="palavra" style="width: 3vw;" src="../img/variaveis/v.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="r" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/variaveis/r.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="a" style="width:10%;" id="palavra" style="width: 4vw;" src="../img/variaveis/a.png"
                    ondragstart="itemSelecionado(event)"></img>
            </div>


            <div class="letras5" onclick="soltarElemento('letra')">
                <h6>L E T R A</h6>
                <img class="l" style="width:13%;" id="letra" style="width: 4vw;" src="../img/variaveis/l.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="e" style="width:13%;" id="letra" style="width: 4vw;" src="../img/variaveis/e.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="t" style="width:13%;" id="letra" style="width: 2.5vw;" src="../img/variaveis/t.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="r" style="width:13%;" id="letra" style="width: 4vw;" src="../img/variaveis/r.png"
                    ondragstart="itemSelecionado(event)"></img>
                <img class="a" style="width:13%;" id="letra" style="width: 4vw;" src="../img/variaveis/a.png"
                    ondragstart="itemSelecionado(event)"></img>
            </div>

        </div>


        <div>
            <div class="caixaResposta" id="caixaResposta" ondragover="areaSoltar(event)" ondrop="soltarElemento(event)">
                <div id="slot1" class="filhoCaixaS"></div>

            </div>
            <button id="botaoResposta" onclick="limparVariaveis('slot1')">Apagar</button>
            <button id="botaoResposta"
                onclick="verificaTipo(document.getElementById('slot1').innerHTML)">Enviar</button>

        </div>

        <div class="inicial">
            <h6>Ajuda</h6>
            <img src="../img/variaveis/help.png" id="inicial" onclick="exibeAjuda()" style="cursor:pointer">
            <h2 id="ajuda" style="display:none">Inteiro = Números Inteiros <br><br>Decimal = Números Com Virgula
                <br><br>Palavra = Texto<br><br>Booleano = Verdadeiro Ou Falso <br><br>Letra = Letras
            </h2>
        </div>




    </div>


    <div style="z-index: -1;" class="alfabeto">

        <img class="a" id="A" src="../img/variaveis/a.png"> </img>
        <img class="b" id="B" src="../img/variaveis/b.png"></img>
        <img class="c" id="C" src="../img/variaveis/c.png"></img>
        <img class="d" id="D" src="../img/variaveis/d.png"></img>
        <img class="e" id="E" src="../img/variaveis/e.png"></img>
        <img class="f" id="F" src="../img/variaveis/f.png"></img>
        <img class="g" id="G" src="../img/variaveis/g.png"></img>
        <img class="h" id="H" src="../img/variaveis/h.png"></img>
        <img class="i" id="I" src="../img/variaveis/i.png"></img>
        <img class="j" id="J" src="../img/variaveis/j.png"></img>
        <img class="k" id="K" src="../img/variaveis/k.png"></img>
        <img class="l" id="L" src="../img/variaveis/l.png"></img>
        <img class="m" id="M" src="../img/variaveis/m.png"></img>
        <img class="n" id="N" src="../img/variaveis/n.png"></img>
        <img class="o" id="O" src="../img/variaveis/o.png"></img>
        <img class="p" id="P" src="../img/variaveis/p.png"></img>
        <img class="q" id="Q" src="../img/variaveis/q.png"></img>
        <img class="r" id="R" src="../img/variaveis/r.png"></img>
        <img class="s" id="S" src="../img/variaveis/s.png"></img>
        <img class="y" id="T" src="../img/variaveis/t.png"></img>
        <img class="u" id="U" src="../img/variaveis/u.png"></img>
        <img class="v" id="V" src="../img/variaveis/v.png"></img>
        <img class="w" id="W" src="../img/variaveis/w.png"></img>
        <img class="x" id="X" src="../img/variaveis/x.png"></img>
        <img class="y" id="Y" src="../img/variaveis/y.png"></img>
        <img class="z" id="Z" src="../img/variaveis/z.png"></img>
    </div>

</body>

</html>



<script>


    // Criar um vetor com números de 1 a 21
    var vetorPerguntas = Array.from({ length: 7 }, (_, index) => index + 0);
    // Embaralhar o vetor
    vetorPerguntas.sort(() => Math.random() - 0.5);

    var idPergunta = 0;  //inicia id como 0 para pegar a primeira pergunta no vetor de perguntas

    carregarPergunta();

    function carregarPergunta() {
        // pega a primeira pergunta do vetor embaralhada pela variavel vetorPerguntas e a exibe ao jogador
        document.getElementById("alterar").innerText = perguntas[vetorPerguntas[idPergunta]].question;
    }

    const itemSelecionado = (event) => {  //realiza a captura do item selecionado pelo usuario
        event.dataTransfer.setData("img", event.target.id);
    }

    const areaSoltar = (event) => { //verifica se o item foi solto em um local permitido
        event.preventDefault();
    }

    const soltarElemento = (event) => {  //solta o elemento no local designado

        var cheio = document.querySelectorAll("#slot1" + " img");

       
        if (cheio.length == 0) {

            var imagem = "";
            var imagensLetras = "";

            if (event != "inteiro" && event != "decimal" && event != "booleano" && event != "palavra" && event != "letra") {
                event.preventDefault();
                imagem = event.dataTransfer.getData("img");
                imagensLetras = "";
            } else {
                imagem = event;
            }

            if (imagem == "inteiro") {
                imagensLetras = document.querySelectorAll('.letras1 img');
            } else if (imagem == "decimal") {
                imagensLetras = document.querySelectorAll('.letras2 img');
            } else if (imagem == "booleano") {
                imagensLetras = document.querySelectorAll('.letras3 img');
            } else if (imagem == "palavra") {
                imagensLetras = document.querySelectorAll('.letras4 img');
            } else {
                imagensLetras = document.querySelectorAll('.letras5 img');
            }
            const slot1 = document.getElementById("slot1");

            const contenedorImagens = document.createElement("div");

            contenedorImagens.style.display = "flex";

            // Adiciona cada imagem ao contêiner flexível
            imagensLetras.forEach((imagem, index) => {
                const novaImagem = document.createElement("img");
                novaImagem.src = '../img/variaveis/' + imagem.classList[0] + '.png';
                novaImagem.className = imagem.classList[0];
                contenedorImagens.appendChild(novaImagem);
            });

            slot1.appendChild(contenedorImagens);

        }

    }

    const limparVariaveis = (k) => { //funcao para limpar a resposta apos ser enviada

        var elemento = document.querySelectorAll("#slot1" + " img");

        elemento.forEach(function (elemento) {
            if (elemento.parentNode) {
                elemento.parentNode.removeChild(elemento);
            }
        });

        if (elemento.length === 0) {
            exibeNotificação("error", "Nada para apagar!", "");
        }

    }

    const verificaTipo = (valor) => {  //verifica se as respostas informadas estão certas

        var tipoCaixa = perguntas[vetorPerguntas[idPergunta]].answers[0].option.trim();

        switch (tipoCaixa) {
            case 'inteiro':
                if (valor.includes('class="i"') && valor.includes('class="n"') && valor.includes('class="t"')) { //caso a resposta esteja certa, exibe que a respota esta certa e limpa o campo de resposta 
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparVariaveis("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta(); //carrega a proxima pergunta
                } else { //caso a resposta esteja errada, informa ao usuario e limpa o campo de resposta
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparVariaveis("slot1");
                }
                break;

            case 'palavra':
                if (valor.includes('class="p"')) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparVariaveis("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparVariaveis("slot1");
                }
                break;

            case 'booleano':
                if (valor.includes('class="b"')) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparVariaveis("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparVariaveis("slot1");
                }
                break;

            case 'letra':
                if (valor.includes('class="l"') && valor.includes('class="e"') && valor.includes('class="t"')) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparVariaveis("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparVariaveis("slot1");
                }
                break;

            case 'decimal':
                console.log(valor)
                if (valor.includes('class="d"')) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparVariaveis("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparVariaveis("slot1");
                }
                break;

            default:
                exibeNotificação("error", "Os dados podem ter sido inseridos incorretamente na area do professor!", "");
                limparVariaveis("slot1");
        }

        if (idPergunta == 6) {   //verifica se o usuario chegou ao final da fase
            exibeNotificação("success", "Você concluiu a fase! Vamos as perguntas da fase!", '../Quizes/quizEntreFases.html?fase=1');
            return;
        }
    }

    const exibeAjuda = () => { //abre a guia de ajuda para auxiliar o usuario
        if (document.querySelector("#ajuda").style.display == "block") {
            document.querySelector("#ajuda").style.display = "none";
        } else {
            document.querySelector("#ajuda").style.display = "block";
        }
    }

    //captura as letras que ficaram espalhados pela fase e os coloca em posições aleatorias da tela
    const alfabeto = document.querySelectorAll('.a, .b, .c, .d, .e, .f, .g, .h, .i, .j, .k, .l, .m, .n, .o, .p, .q, .r, .s, .t, .u, .v, .w, .x, .y, .z');

    for (var l = 0; l < alfabeto.length; l++) {

        const posicaoLeft = ["5", "10", "15", "20", "25", "30", "40", "42", "58", "60", "64", "68", "70", "74", "78", "80", "84", "88", "90", "94"];
        const posicaoBottom = ["5", "10", "15", "18", "20", "23", "25", "28", "65", "70", "75", "80", "85", "90"];

        const posicaoL = Math.floor(Math.random() * posicaoLeft.length);
        const posicaoB = Math.floor(Math.random() * posicaoBottom.length);

        if (+posicaoLeft[posicaoL] < 30) { //gera novamente caso o bottom posicione as letras dentro do teclado de letras
            const novaPosB = ["0", "93"];

            const posB = Math.floor(Math.random() * novaPosB.length);

            alfabeto[l].style.left = posicaoLeft[posicaoL] + "%";
            alfabeto[l].style.bottom = novaPosB[posB] + "%";

        } else {
            alfabeto[l].style.left = posicaoLeft[posicaoL] + "%";
            alfabeto[l].style.bottom = posicaoBottom[posicaoB] + "%";
        }
    }

    //funcao para verificar se o usuario clicou na tecla 'Esc' para retornar ao menu de fases
    const voltar_menu = () => {
        var tecla = event.keyCode;


        if (tecla == 27) {
            window.location.href = '../telaInicial/city.html';
        }
    }
    document.addEventListener('keydown', voltar_menu);
</script>