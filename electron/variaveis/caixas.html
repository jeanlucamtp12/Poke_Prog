<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="../sweetalert/sweetalert.js"></script>
    <script src="../telaInicial/dialogos.js"></script>
    <script src="./perguntas.js"></script>

    <title>Caixas</title>
    <link rel="stylesheet" href="../css/unowmsFase.css">

</head>

<body>

    <audio id="audio" src="../sounds/variaveis.mp3" loop autoplay></audio>


    <div style="padding: 1vw;" class="titulo">
        <h3>Informe o tipo de variavel dentro da caixa, arrastando os Unowm</h3>
    </div>



    <div class="caixaConteudo">
        <img src="../img/fases unowms/caixa.png">
        <div class="textoCaixa">
            <h2 style="font-weight: bold; font-size: 1.1vw;" id="alterar"></h2></img>
        </div>
    </div>

    <div class="tela">

        <div class="teclado">

            <div class="letras">
                <h6>I N T E I R O</h6>
                <img id="inteiro" style="width: 4vw;" src="../img/unowns/i.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="inteiro" style="width: 4.5vw;" src="../img/unowns/n.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="inteiro" style="width: 2.5vw;" src="../img/unowns/t.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="inteiro" style="width: 4vw;" src="../img/unowns/e.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="inteiro" style="width: 4vw;" src="../img/unowns/i.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="inteiro" style="width: 3.5vw;" src="../img/unowns/r.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="inteiro" style="width: 3.6vw;" src="../img/unowns/o.gif"
                    ondragstart="itemSelecionado(event)"></img>
            </div>

            <div class="letras">
                <h6>D E C I M A L</h6>
                <img id="decimal" style="width: 3.5vw;" src="../img/unowns/d.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="decimal" style="width: 4vw;" src="../img/unowns/e.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="decimal" style="width: 4vw;" src="../img/unowns/c.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="decimal" style="width: 4vw;" src="../img/unowns/i.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="decimal" style="width: 3.3vw;" src="../img/unowns/m.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="decimal" style="width: 4vw;" src="../img/unowns/a.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="decimal" style="width: 4vw;" src="../img/unowns/l.gif"
                    ondragstart="itemSelecionado(event)"></img>
            </div>


            <div class="letras">
                <h6>B O O L E A N O</h6>
                <img id="booleano" style="width: 4vw;" src="../img/unowns/b.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="booleano" style="width: 4vw;" src="../img/unowns/o.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="booleano" style="width: 4vw;" src="../img/unowns/o.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="booleano" style="width: 4vw;" src="../img/unowns/l.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="booleano" style="width: 4vw;" src="../img/unowns/e.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="booleano" style="width: 4vw;" src="../img/unowns/a.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="booleano" style="width: 4vw;" src="../img/unowns/n.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="booleano" style="width: 4vw;" src="../img/unowns/o.gif"
                    ondragstart="itemSelecionado(event)"></img>

            </div>


            <div class="letras">
                <h6>P A L A V R A</h6>
                <img id="palavra" style="width: 4vw;" src="../img/unowns/p.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="palavra" style="width: 4vw;" src="../img/unowns/a.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="palavra" style="width: 4vw;" src="../img/unowns/l.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="palavra" style="width: 4vw;" src="../img/unowns/a.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="palavra" style="width: 3vw;" src="../img/unowns/v.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="palavra" style="width: 4vw;" src="../img/unowns/r.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="palavra" style="width: 4vw;" src="../img/unowns/a.gif"
                    ondragstart="itemSelecionado(event)"></img>
            </div>


            <div class="letras">
                <h6>L E T R A</h6>
                <img id="letra" style="width: 4vw;" src="../img/unowns/l.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="letra" style="width: 4vw;" src="../img/unowns/e.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="letra" style="width: 2.5vw;" src="../img/unowns/t.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="letra" style="width: 4vw;" src="../img/unowns/r.gif"
                    ondragstart="itemSelecionado(event)"></img>
                <img id="letra" style="width: 4vw;" src="../img/unowns/a.gif"
                    ondragstart="itemSelecionado(event)"></img>
            </div>

        </div>



        <div>
            <div class="caixaResposta" id="caixaResposta" ondragover="areaSoltar(event)" ondrop="soltarElemento(event)">
                <div id="slot1" class="filhoCaixaS"></div>

            </div>
            <button id="botaoResposta" onclick="limparUnowns('slot1')">Apagar</button>
            <button id="botaoResposta"
                onclick="verificaTipo(document.getElementById('slot1').innerHTML)">Enviar</button>



        </div>

        <div class="inicial">
            <h6 style="font-weight: bold; margin-left: 1.5vw; font-size: 1.3vw">Ajuda</h6>
            <img src="../img/unowns/klink.png" id="inicial" onclick="exibeAjuda()" style="cursor:pointer">
            <h2 id="ajuda" style="display:none">Inteiro = Números Inteiros <br><br>Decimal = Números Com Virgula
                <br><br>Palavra = Texto<br><br>Booleano = Verdadeiro Ou Falso <br><br>Letra = Letras
            </h2>
        </div>




    </div>


    <div style="z-index: -1;" class="alfabeto">

        <img id="A" src="../img/unowns/a.gif"> </img>
        <img id="B" src="../img/unowns/b.gif"></img>
        <img id="C" src="../img/unowns/c.gif"></img>
        <img id="D" src="../img/unowns/d.gif"></img>
        <img id="E" src="../img/unowns/e.gif"></img>
        <img id="F" src="../img/unowns/f.gif"></img>
        <img id="G" src="../img/unowns/g.gif"></img>
        <img id="H" src="../img/unowns/h.gif"></img>
        <img id="I" src="../img/unowns/i.gif"></img>
        <img id="J" src="../img/unowns/j.gif"></img>
        <img id="K" src="../img/unowns/k.gif"></img>
        <img id="L" src="../img/unowns/l.gif"></img>
        <img id="M" src="../img/unowns/m.gif"></img>
        <img id="N" src="../img/unowns/n.gif"></img>
        <img id="O" src="../img/unowns/o.gif"></img>
        <img id="P" src="../img/unowns/p.gif"></img>
        <img id="Q" src="../img/unowns/q.gif"></img>
        <img id="R" src="../img/unowns/r.gif"></img>
        <img id="S" src="../img/unowns/s.gif"></img>
        <img id="T" src="../img/unowns/t.gif"></img>
        <img id="U" src="../img/unowns/u.gif"></img>
        <img id="V" src="../img/unowns/v.gif"></img>
        <img id="W" src="../img/unowns/w.gif"></img>
        <img id="X" src="../img/unowns/x.gif"></img>
        <img id="Y" src="../img/unowns/y.gif"></img>
        <img id="Z" src="../img/unowns/z.gif"></img>
        <img id="ib" src="../img/unowns/ib.gif"></img>
        <img id="ia" src="../img/unowns/ia.gif"></img>
    </div>

</body>

</html>



<script>


    // Criar um vetor com números de 1 a 21
    var vetorPerguntas = Array.from({ length: 7 }, (_, index) => index + 0);
    // Embaralhar o vetor
    vetorPerguntas.sort(() => Math.random() - 0.5);

    var idPergunta = 0;  //inicia id como 0 para pegar a primeira pergunta no vetor de perguntas

    carregarPergunta();

    function carregarPergunta() {
        // pega a primeira pergunta do vetor embaralhada pela variavel vetorPerguntas e a exibe ao jogador
        document.getElementById("alterar").innerText = perguntas[vetorPerguntas[idPergunta]].question;
    }

    const itemSelecionado = (event) => {  //realiza a captura do item selecionado pelo usuario
        event.dataTransfer.setData("img", event.target.id);
    }

    const areaSoltar = (event) => { //verifica se o item foi solto em um local permitido
        event.preventDefault();
    }

    const soltarElemento = (event) => {  //solta o elemento no local designado
        event.preventDefault();
        var imagem = event.dataTransfer.getData("img");
        document.getElementById("slot1").innerHTML = "<img src='../img/unowns/" + imagem + ".gif'>";
    }

    const limparUnowns = (k) => { //funcao para limpar a resposta apos ser enviada
        if (k == 1) {
            exibeNotificação("error", "Nada para apagar!", "");
        }

        var elemento = document.querySelector("#slot1" + " img");
        if (elemento.parentNode) {
            elemento.parentNode.removeChild(elemento);
        }  
    }

    const verificaTipo = (valor) => {  //verifica se as respostas informadas estão certas
        if (idPergunta == 6) {   //verifica se o usuario chegou ao final da fase

            exibeNotificação("success", "Você concluiu a fase! Vamos as perguntas da fase!", '../Quizes/quizEntreFases.html?fase=1');
            return;
        }

        var tipoCaixa = perguntas[vetorPerguntas[idPergunta]].answers[0].option.trim();

        switch (tipoCaixa) {
            case 'inteiro':
                if (valor.includes("inteiro")) { //caso a resposta esteja certa, exibe que a respota esta certa e limpa o campo de resposta 
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparUnowns("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta(); //carrega a proxima pergunta
                } else { //caso a resposta esteja errada, informa ao usuario e limpa o campo de resposta
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparUnowns("slot1");
                }
                break;

            case 'palavra':
                if (valor.includes("palavra")) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparUnowns("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparUnowns("slot1");
                }
                break;

            case 'booleano':
                if (valor.includes("booleano")) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparUnowns("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparUnowns("slot1");
                }
                break;

            case 'letra':
                if (valor.includes("letra")) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparUnowns("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparUnowns("slot1");
                }
                break;

            case 'decimal':
                console.log(valor)
                if (valor.includes("decimal")) {
                    exibeNotificação("success", "Resposta Certa. Vamos ao proximo!", "");
                    limparUnowns("slot1");
                    idPergunta = idPergunta + 1;
                    carregarPergunta();
                } else {
                    exibeNotificação("error", "Tente Novamente!", "");
                    limparUnowns("slot1");
                }
                break;

            default:
                exibeNotificação("error", "Os dados podem ter sido inseridos incorretamente na area do professor!", "");
                limparUnowns("slot1");
        }
    }

    const exibeAjuda = () => { //abre a guia de ajuda para auxiliar o usuario
        if (document.querySelector("#ajuda").style.display == "block") {
            document.querySelector("#ajuda").style.display = "none"; 
        } else {
            document.querySelector("#ajuda").style.display = "block"; 
        }
    }

    //captura os unowns que ficaram espalhados pela fase e os coloca em posições aleatorias da tela
    const alfabeto = document.querySelectorAll('#A, #B, #C, #D, #E, #F, #G, #H, #I, #J, #K, #L, #M, #N, #O, #P, #Q, #R, #S, #T, #U, #V, #W, #X, #Y, #Z, #ia, #ib');

    for (var l = 0; l < alfabeto.length; l++) {

        const posicaoLeft = ["5", "10", "15", "20", "25", "30", "40", "42", "58", "60", "64", "68", "70", "74", "78", "80", "84", "88", "90", "94"];
        const posicaoBottom = ["5", "10", "15", "18", "20", "23", "25", "28", "65", "70", "75", "80", "85", "90"];

        const posicaoL = Math.floor(Math.random() * posicaoLeft.length);
        const posicaoB = Math.floor(Math.random() * posicaoBottom.length);

        if (+posicaoLeft[posicaoL] < 30) { //gera novamente caso o bottom posicione os Unows dentro do teclado de Unows
            const novaPosB = ["0", "93"];

            const posB = Math.floor(Math.random() * novaPosB.length);

            alfabeto[l].style.left = posicaoLeft[posicaoL] + "%";
            alfabeto[l].style.bottom = novaPosB[posB] + "%";

        } else {
            alfabeto[l].style.left = posicaoLeft[posicaoL] + "%";
            alfabeto[l].style.bottom = posicaoBottom[posicaoB] + "%";
        }
    }

    //funcao para verificar se o usuario clicou na tecla 'Esc' para retornar ao menu de fases
    const voltar_menu = () => {
        var tecla = event.keyCode;


        if (tecla == 27) {
            window.location.href = '../telaInicial/city.html';
        }
    }
    document.addEventListener('keydown', voltar_menu);
</script>