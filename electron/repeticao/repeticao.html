<?php
$id = filter_input(INPUT_GET, "id", FILTER_SANITIZE_NUMBER_INT);
?>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <link rel="stylesheet" href="../css/repeticao.css">


    <title>Document</title>
</head>

<body>

    <div class="repeticao">









       



        <img class="estrela" src="../img/repeticao/estrela.png">
        <img class="estrela2" src="../img/repeticao/estrela.png">


        <img class="nuvens" src="../img/decisao/clouds.png" style.right="-220px" style.display="none">
        <img class="nuvens" src="../img/decisao/clouds.png" style.right="-20px" style.display="none">


        <img class="chuva" src="../img/repeticao/chuva.gif">


        

        <img class="arvore" src="../img/repeticao/arvore.png" style.right="-220px">

 
        <script>/*
        <img class="combee" src="../img/repeticao/combee.png">
        <img class="combee2" src="../img/repeticao/combee.png">
        <img class="combee3" src="../img/repeticao/combee.png">
        <img class="combee4" src="../img/repeticao/combee.png">
        <img class="combeeShiny" src="../img/repeticao/combee-shiny.png"> 
        <img class="vespiquen" src="../img/repeticao/vespiquen.png"> 
        <img class="comeia" src="../img/repeticao/comeia.png">*/ </script>


        
        <img class="timburr" id="timburr"  src="../img/repeticao/timburr_verso.png">

        <div class="caixa">
            <img class="madeira" id="madeira" src="../img/repeticao/tronco.png" style="display:none">
        </div>

        <img class="troncos" src="../img/repeticao/troncos.png">



        <div class="obstaculo">
            <div class="rio"></div>
            <img class="entrada" id="entrada" src="../img/repeticao/obstaculo.png">
            
        </div>
     


        <img class="staryu" src="../img/repeticao/staryu.png">
        <img class="goldeen" src="../img/repeticao/seadra.png">

        <img class="bolhas" src="../img/repeticao/agua.png">

        <img class="tijolo" src="../img/repeticao/tijolo.png">




        <div class="tronco"></div>



        <div class="ponte">
            <div class="filhoPonte" img src="" id="9" ></div>
            <div class="filhoPonte" img src="" id="8"></div>
            <div class="filhoPonte" img src="" id="7"></div>
            <div class="filhoPonte" img src="" id="6"></div>
            <div class="filhoPonte" img src="" id="5"></div>
            <div class="filhoPonte" img src="" id="4"></div>
            <div class="filhoPonte" img src="" id="3"></div>
            <div class="filhoPonte" img src="" id="2"></div>
            <div class="filhoPonte" img src="" id="1"></div>
            <div class="filhoPonte" img src="" id="0" width="20px"></div>

        </div>



    <script>
        /*

        <div class="for">

            <div class="caixas">
               <h6 >Iniciou com:</h6>

                <img src="../img/repeticao/favo.png" width="50px" align-items="center" align-items="center" style="width: 30px;"> </img>
                <img src="../img/repeticao/favo.png" width="50px" align-items="center" align-items="center" style="width: 30px;"> </img>

                <h6 id="inicializacao">0</h6>
            </div>
            <div class="caixas">
                <h6 >Chuva para quando obtiver:</h6>
                <img  src="../img/repeticao/favoCompleto.png" width="50px" align-items="center" align-items="center"> </img>
                <h6 id="favoCompleto">0 de 5 Favos</h6>


            </div>
            <div class="caixas">
                <h6 >Coletados</h6>
                <img src="../img/repeticao/favo.png" width="50px" align-items="center" align-items="center"> </img>
                <h6 id="incremento">0</h6>


            </div>



        </div>
     */
    </script>


    </div>
    











    <script>
        let i = 0;
        let tronco = 0;


       // var combeeShiny = document.querySelector('.combeeShiny');
        var troncos = document.querySelector('.troncos');
        var timburr = document.querySelector('.timburr');
        var staryu = document.querySelector('.staryu');
        var bolhas = document.querySelector('.bolhas');
        var entrada = document.querySelector('.entrada');
        var tijolo = document.querySelector('.tijolo');
        entrada.getBoundingClientRect();
        tijolo.getBoundingClientRect();




      


        const loop = setInterval(() => {

            //posicaoCombeeShiny = window.getComputedStyle(combeeShiny).bottom;
            posicaoTimburrPulo = window.getComputedStyle(timburr).bottom;
            const removerPxTimburr = posicaoTimburrPulo.replace('px', '');
            valorConvertidoTimburr = parseInt(removerPxTimburr);

            posicaoTijolo = window.getComputedStyle(tijolo).bottom;


            posicaoTimburr = timburr.offsetLeft;

            posicaoStaryu = staryu.offsetLeft;
            posicaoBolhas = bolhas.offsetLeft;














            
            bolhas.getBoundingClientRect();
            timburr.getBoundingClientRect();
            staryu.getBoundingClientRect();





        
            if ((timburr.x + 40 < bolhas.x + bolhas.width && timburr.x - 40 + timburr.width > bolhas.x) && (timburr.y + 40 < bolhas.y + bolhas.height && timburr.y -40 + timburr.height > bolhas.y)) {
                window.alert("bateuuu na agua");
                personagem.style.bottom = "-1%";
                personagem.style.left = "0%";                        
            }
            

            if ((timburr.x + 40 < staryu.x + staryu.width && timburr.x - 40 + timburr.width > staryu.x) && (timburr.y + 40 < staryu.y + staryu.height && timburr.y -40 + timburr.height > staryu.y)) {
                window.alert("bateuuu na estrela");
                personagem.style.bottom = "-1%";
                personagem.style.left = "0%";                        
            }
            






            if ((timburr.x + 40 < tijolo.x + tijolo.width && timburr.x - 40 + timburr.width > tijolo.x) && (timburr.y + 40 < tijolo.y + tijolo.height && timburr.y -40 + timburr.height > tijolo.y)) {
                
                personagem.style.bottom = "30%";                        
                document.documentElement.style.setProperty('--my-start-bottom', '30%');
                document.documentElement.style.setProperty('--my-end-bottom', '30%');  
                            
            }
            else if (!(timburr.x + 40 < tijolo.x + tijolo.width && timburr.x - 40 + timburr.width > tijolo.x)) {
                    personagem.style.bottom = "-1%";                        
                    document.documentElement.style.setProperty('--my-start-bottom', '-1%');
                    document.documentElement.style.setProperty('--my-end-bottom', '-1%');   
            }  








        
       

         

        

            posicaoTroncos = troncos.offsetLeft;


            var estadoMadeira = document.getElementById("madeira").style.display;


            

            if((timburr.x + 40 < entrada.x + entrada.width && timburr.x - 40 + timburr.width > entrada.x)&& estadoMadeira == "block"){
                document.getElementById(tronco).innerHTML = "<img src='../img/repeticao/tronco_ponte.png'>";
                document.getElementById("madeira").style.display = "none";

                tronco = tronco + 1;

                if(tronco == 10){
                    window.alert("VocÃª concluiu a fase! Voltando ao Mapa da Cidade");
                    window.location.href = "../telaInicial/city.html";
                }
            }

            troncos.getBoundingClientRect();


            if ((timburr.x + 40 < troncos.x + troncos.width && timburr.x - 40 + timburr.width > troncos.x) && (timburr.y + 40 < troncos.y + troncos.height && timburr.y -40 + timburr.height > troncos.y)) {
                document.getElementById("madeira").style.display = "block";                       
            }
            







        }, 5);

        const incrementar = () => {
            i = i + 1;

        }










        



                const moverDireita = () => {


                    if (!(timburr.x + 40 < entrada.x + entrada.width && timburr.x - 40 + timburr.width > entrada.x)) {
           



                    document.getElementById("timburr").src = "../img/repeticao/timburr_verso.png";

                    const el = document.querySelector('.timburr');
                    const value = getComputedStyle(el).getPropertyValue('left');


                    var remove_string = value.replace('px', '');
                    var valorNum = parseInt(remove_string);

                    var numPx = valorNum + 10;
                    var soma = parseInt(value) + 10;

                    personagem.style.left = soma + "px";

                }  

                }

                const moverEsquerda = () => {

                    document.getElementById("timburr").src = "../img/repeticao/timburr.png";
                    
                    const el = document.querySelector('.timburr');
                    const value = getComputedStyle(el).getPropertyValue('left');


                    var remove_string = value.replace('px', '');
                    var valorNum = parseInt(remove_string);

                    var numPx = valorNum + 10;
                    var soma = parseInt(value) - 10;

                    personagem.style.left = soma + "px";

                }

                   


        const personagem = document.querySelector('.timburr');

        const mover = () => {

            var tecla = event.keyCode;


              if (tecla == 39) {
                  moverDireita();

              } else if (tecla == 37) {
                  moverEsquerda();
              } else {

            personagem.classList.add('movimento');
            setTimeout(function() {
                personagem.classList.remove('movimento');
            }, 1000);
        }



          }
        document.addEventListener('keydown', mover);
    </script>


</body>

</html>