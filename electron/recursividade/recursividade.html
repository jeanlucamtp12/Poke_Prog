<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="../css/recursividade.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <div class="campo">

        <div class="cherrim">
            <img class="cherrim" src="../img/recursividade/cherrim-sunshine.gif">
        </div>

        <div class="porta0">
            <img class="porta0" src="../img/recursividade/porta_aberta2.png">
        </div>

        <div class="porta1">
            <h2 id="resposta1">7</h2>
            <img class="porta1" id="porta1"  src="../img/recursividade/porta.png">
        </div>

        <div class="porta2">
            <h2 id="resposta2">2</h2>
            <img class="porta2" id="porta2"  src="../img/recursividade/porta.png">
        </div>

        <div class="porta3">
            <h2 id="resposta3">28</h2>
          <img class="porta3" id="porta3"  src="../img/recursividade/porta.png">
        </div>

        <div class="porta4">
            <h2 id="resposta4">100</h2>
            <img class="porta4" id="porta4"  src="../img/recursividade/porta.png">
        </div>

        <div class="portaAberta1"  >
            <img class="portaAberta1"id="portaAberta1"  src="../img/recursividade/orbeetle-gigantamax_esquerda.gif">
        </div>

        <div class="portaAberta2"  >
            <img class="portaAberta2" id="portaAberta2" src="../img/recursividade/orbeetle-gigantamax_direita.gif">
        </div>


        <div class="chao1">
            <img class="bloco1" src="../img/recursividade/chao.png">
        </div>
        <div class="chao2">
            <img class="bloco2" src="../img/recursividade/chao.png">
        </div>
        <div class="chao3">
            <img class="bloco3" src="../img/recursividade/chao.png">
        </div>
        <div class="chao4">
            <img class="bloco4" src="../img/recursividade/chao.png">
        </div>


        <div class="escadas">
            <div class="escada1" id="1">
                <img class="escada1" id="escada1" ondragover="areaColisao(event)" src="../img/recursividade/escada.png">
            </div>
            <div class="escada2" id="2">
                <img class="escada2" id="escada2" ondragover="areaColisao(event)" src="../img/recursividade/escada.png">
            </div>

            <div class="escada3" id="3">
                <img class="escada3" id="escada3" ondragover="areaColisao(event)" src="../img/recursividade/escada.png">
            </div>
            <div class="escada4" id="4">
                <img class="escada4" id="escada4" ondragover="areaColisao(event)" src="../img/recursividade/escada.png">
            </div>

            <div class="escada5" id="5">
                <img class="escada5" id="escada5" ondragover="areaColisao(event)" src="../img/recursividade/escada.png">
            </div>


        </div>

        


        <div class="pedra">
            <img class="pedra1" id="pedra1" src="../img/recursividade/tronco.png">
        </div>

        <div class="pedra">
            <img class="pedra2" id="pedra2" src="../img/recursividade/tronco.png">
        </div>

        <div class="pedra">
            <img class="pedra3" id="pedra3" src="../img/recursividade/tronco.png">
        </div>

        <div class="pedra">
            <img class="pedra4" id="pedra4" src="../img/recursividade/tronco.png">
        </div>


        <div class="personagem">
            <img class="personagem" id="personagem" ondragstart="personagemIniciado(event)"
                src="../img/recursividade/1_direita.png">
        </div>



        <div class="pergunta">
            <h3>Quanto Ã© 1+1=</h3>

        </div>
       
        <div class="espaco">
            <img class="espaco" id="espaco" src="../img/recursividade/space.png" style="display:none">
        </div>

    </div>
















    <script>




        const personagemIniciado = (event) => {
            event.dataTransfer.setData("img", event.target.id);
        }

        const areaColisao = (event) => {
            event.preventDefault();
        }

        /*const detecarColisao = (event) => {
            event.preventDefault();

            var imagem = event.dataTransfer.getData("img");
            var slot = "slot" + i;
            document.getElementById(slot).innerHTML = "<img src='../img/funcoes/itens/" + imagem + ".png'>";
            i = i + 1;

            lista.push(imagem);

            if (i == 5) {
                verificaDados();
            }

        }*/








        const loop = setInterval(() => {

            var bulbasaur = document.getElementById("personagem");
            bulbasaur.getBoundingClientRect();



            var pedras = document.querySelectorAll("div.pedra #pedra1, div.pedra #pedra2, div.pedra #pedra3, div.pedra #pedra4");
            console.log(pedras.length);



            for (var i = 0; i < pedras.length; i++) {
                    if ((bulbasaur.x  < pedras[i].x + pedras[i].width && bulbasaur.x + bulbasaur.width > pedras[i].x) && (bulbasaur.y < pedras[i].y + pedras[i].height && bulbasaur.y + bulbasaur.height > pedras[i].y)) {
                        personagem.style.bottom = "1%";
                        personagem.style.left = "0%";                        
                    }
            }
                

            }, 5);


    </script>





    <script>









        listaEscada = [];
        valor = "livre";



        const moverDireita = () => {



            document.getElementById("personagem").src = "../img/recursividade/1_direita.png";

            const el = document.querySelector('.personagem');
            const value = getComputedStyle(el).getPropertyValue('left');


            var remove_string = value.replace('px', '');
            var valorNum = parseInt(remove_string);

            var numPx = valorNum + 10;
            var soma = parseInt(value) + 10;

            personagem.style.left = soma + "px";



        }



        const moverEsquerda = () => {

            document.getElementById("personagem").src = "../img/recursividade/1_esquerda.png";

            const el = document.querySelector('.personagem');
            const value = getComputedStyle(el).getPropertyValue('left');


            var remove_string = value.replace('px', '');
            var valorNum = parseInt(remove_string);

            var numPx = valorNum + 10;
            var soma = parseInt(value) - 10;

            personagem.style.left = soma + "px";

        }

        const moverCima = () => {

            document.getElementById("personagem").src = "../img/recursividade/1_cima.png";

            const el = document.querySelector('.personagem');
            const value = getComputedStyle(el).getPropertyValue('bottom');





            var remove_string = value.replace('px', '');
            var valorNum = parseInt(remove_string);

            var numPx = valorNum + 10;
            var soma = parseInt(value) + 10;

            personagem.style.bottom = soma + "px";

        }

        const moverBaixo = () => {

            document.getElementById("personagem").src = "../img/recursividade/1_cima.png";

            const el = document.querySelector('.personagem');
            
            const value = getComputedStyle(el).getPropertyValue('bottom');


            var remove_string = value.replace('px', '');
            var valorNum = parseInt(remove_string);

            var numPx = valorNum + 10;
            var soma = parseInt(value) - 10;

            personagem.style.bottom = soma + "px";

        }




        const personagem = document.querySelector('.personagem');




        const mover = () => {

            var tecla = event.keyCode;

            var chao = document.querySelector('.bloco4');

            var per = document.getElementById("personagem");


            var portas = document.querySelectorAll("#porta1, #porta2, #porta3, #porta4");
            var escadas = document.querySelectorAll("#escada1, #escada2, #escada3, #escada4, #escada5");
            var respostas = document.querySelectorAll("div.porta1  h2, div.porta2  h2, div.porta3  h2, div.porta4  h2");



            for (var i = 0; i < portas.length; i++) {
                    if ((per.x  < portas[i].x + portas[i].width && per.x + per.width > portas[i].x) && (per.y < portas[i].y + portas[i].height && per.y - 10 + per.height > portas[i].y)) {
                        if(tecla == 32 && respostas[i].id == "resposta2"){
                            window.alert("proxima fase!");
                            document.getElementById("espaco").style.display = "none";
                            break;

                        }else if(tecla == 32 && respostas[i].id != "resposta2"){
                            personagem.style.bottom = "1%";
                            personagem.style.left = "0%";
                            document.getElementById("espaco").style.display = "none";
                            break;

                        }
                        document.getElementById("espaco").style.display = "block";
                    }
            }


          

            for (var i = 0; i < escadas.length; i++) {
                escadas[i].getBoundingClientRect();
                listaEscada.push(escadas[i]);

            }
            var posicaoPer = window.getComputedStyle(per).bottom;


            var portaAberta1 = document.getElementById("portaAberta1");
            var portaAberta2 = document.getElementById("portaAberta2");

            per.getBoundingClientRect();
            //escada.getBoundingClientRect();
            portaAberta1.getBoundingClientRect();
            portaAberta2.getBoundingClientRect();

       


            if ((per.x < portaAberta1.x + portaAberta1.width && per.x  + per.width > portaAberta1.x && per.y < portaAberta1.y  + portaAberta1.height && per.y  + per.height > portaAberta1.y)   || (per.x < portaAberta2.x + portaAberta2.width && per.x  + per.width > portaAberta2.x && per.y < portaAberta2.y  + portaAberta2.height && per.y  + per.height > portaAberta2.y) ) {
                personagem.style.bottom = "1%";
                personagem.style.left = "0%";

            }
            
            if (tecla == 39 && valor == "livre") {
                moverDireita();

            } else if (tecla == 37 && valor == "livre") {
                moverEsquerda();
            }


            else if (tecla == 38) { //x=lagura y=altura

                for (var i = 0; i < escadas.length; i++) {
                    if ((per.x + 30 < escadas[i].x + escadas[i].width && per.x - 30 + per.width > escadas[i].x) && (per.y < escadas[i].y + 10 + escadas[i].height && per.y - 10 + per.height > escadas[i].y)) {

                        valor = "bloqueado";

                        moverCima();
                    }
                    if(per.y <= escadas[i].y -40){
                        valor = "livre";

                    }

                    console.log(valor);

                }
            }

            /*else if (tecla == 40) {


                for (var i = 0; i < escadas.length; i++) {

                    if ((per.x + 30 < escadas[i].x + escadas[i].width && per.x - 30 + per.width > escadas[i].x) && (per.y + 100 < escadas[i].y + escadas[i].height && per.y -100 + per.height > escadas[i].y)) {
                        valor = "bloqueado";

                        moverBaixo();
                    }
                    if(per.y >= escadas[i].y){
                        valor = "livre";

                    }


                }
                
            }*/





        }





        document.addEventListener('keydown', mover);
    </script>




</body>

</html>