<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="../sweetalert/sweetalert.js"></script>
    <script src="../telaInicial/dialogos.js"></script>
    <link rel="stylesheet" href="../css/excecoes.css">


    <title>Document</title>
</head>

<body>

    <audio id="audio" src="../sounds/excecao.mp3" loop autoplay></audio>


    <div class="cidade">


        <div>
            <img class="arvoreMorta2" src="../img/excecoes/arvoreMorta.png"></img>
            <img class="arvoreMorta" src="../img/excecoes/arvoreMorta2.png" style="right: 700px;"></img>


        </div>

        <div>
            <img class="cruz" src="../img/excecoes/cruz.png" style="left: 100px;"></img>
            <img class="cruz" src="../img/excecoes/cruz.png"></img>


        </div>

        <div>
            <img class="nuvens" src="../img/excecoes/nuvens.png"></img>
            <img class="nuvens2" src="../img/excecoes/nuvens.png"></img>
            <img class="nuvens3" src="../img/excecoes/nuvens.png"></img>
        </div>

        <div>
            <img class="arvore" src="../img/excecoes/arvore.png"></img>

        </div>

        <div>
            <img class="arvore2" src="../img/excecoes/arvore2.png"></img>

        </div>

        <div>
            <img class="mato um" src="../img/excecoes/mato.png"></img>

        </div>
        <div>
            <img class="mato dois" src="../img/excecoes/mato2.png"></img>

        </div>

        <div>
            <img class="teia" src="../img/excecoes/teia.png"></img>
        </div>


        <div class="morcegos">
            <img class="morcego primeiro" src="../img/excecoes/mZ.gif"></img>
            <img class="morcego segundo" src="../img/excecoes/mZ.gif"></img>
            <img class="morcego terceiro" src="../img/excecoes/mZ.gif"></img>
            <img class="morcego quarto" src="../img/excecoes/mZ.gif"></img>


        </div>
        <img class="tumulo" src="../img/excecoes/tumulo.png"></img>
        <div>


            <div>
                <img class="rastelo" src="../img/excecoes/rastelo.png"></img>

            </div>

            <div class="rio">
            </div>

            <div>
                <img class="estrela " src="../img/excecoes/estrela.png"></img>
                <img class="estrela " src="../img/excecoes/estrela.png" style="left: 1150px; top: 150px;"></img>
                <img class="estrela " src="../img/excecoes/estrela.png" style="left: 950px; top: 250px;"></img>
                <img class="estrela " src="../img/excecoes/estrela.png" style="left: 850px; top: 200px;"></img>
                <img class="estrela " src="../img/excecoes/estrela.png" style="left: 750px; top: 350px;"></img>
                <img class="estrela " src="../img/excecoes/estrela.png" style="left: 650px; top: 150px;"></img>
                <img class="estrela " src="../img/excecoes/estrela.png" style="left: 1550px; top: 200px;"></img>
                <img class="estrela " src="../img/excecoes/estrela.png" style="left: 1250px; top: 450px;"></img>
                <img class="estrela " src="../img/excecoes/estrela.png" style="left: 1150px; top: 150px;"></img>
                <img class="estrela " src="../img/excecoes/estrela.png" style="left: 950px; top: 390px;"></img>
                <img class="estrela " src="../img/excecoes/estrela.png" style="left: 850px; top: 200px;"></img>
            </div>

            <div>
                <img id="m1" class="monstro1 m1" src="../img/excecoes/fantasmas/m1.gif"
                    style="right: 200px; display: block; opacity:1;" onclick="resposta('0')"></img>
                <img id="m2" class=" monstro1 m2" src="../img/excecoes/fantasmas/m1Shy.gif"
                    style="right: 100px;  bottom: 50px; display: block; opacity:1;" onclick="resposta('1')"></img>
                <img id="m3" class="monstro1 m3" src="../img/excecoes/fantasmas/m1.gif"
                    style="right: 950px;  bottom: 50px; display: block; opacity:1;" onclick="resposta('0')"></img>
                <img id="m4" class="monstro1 m4" src="../img/excecoes/fantasmas/m1.gif"
                    style=" display: block; opacity:1;" onclick="resposta('0')"></img>

            </div>
            <div>
                <img id="o1" class="monstro2 o1" src="../img/excecoes/fantasmas/m2.gif" style="display: none; "
                    onclick="resposta('0')"></img>
                <img id="o2" class="monstro2 o2" src="../img/excecoes/fantasmas/m2Shy.gif" style="display: none; "
                    onclick="resposta('1')"></img>
                <img id="o3" class="monstro2 o3" src="../img/excecoes/fantasmas/m2.gif" style="display: none; "
                    onclick="resposta('0')"></img>
                <img id="o4" class="monstro2 o4" src="../img/excecoes/fantasmas/m2.gif" style=" display: none; "
                    onclick="resposta('0')"></img>

            </div>


            <div>
                <img id="l1" class="monstro3 l1" src="../img/excecoes/fantasmas/m5.gif" style="display: none;"
                    onclick="resposta('0')"></img>
                <img id="l2" class="monstro3 l2" src="../img/excecoes/fantasmas/m5Shy.gif" style="display: none; "
                    onclick="resposta('1')"></img>
                <img id="l3" class="monstro3 l3" src="../img/excecoes/fantasmas/m5.gif" style="display: none; "
                    onclick="resposta('0')"></img>
                <img id="l4" class="monstro3 l4" src="../img/excecoes/fantasmas/m5.gif" style=" display: none; "
                    onclick="resposta('0')"></img>

            </div>

            <div>
                <img id="f1" class="monstro4 f1" src="../img/excecoes/fantasmas/m7.gif" style="display: none;"
                    onclick="resposta('0')"></img>
                <img id="f2" class="monstro4 f2" src="../img/excecoes/fantasmas/m7Shy.gif" style="display:none"
                    onclick="resposta('1')"></img>
                <img id="f3" class="monstro4 f3" src="../img/excecoes/fantasmas/m7.gif" style="display: none; "
                    onclick="resposta('0')"></img>
                <img id="f4" class="monstro4 f4" src="../img/excecoes/fantasmas/m7.gif" style=" display: none;"
                    onclick="resposta('0')"></img>

            </div>


            <div>
                <img id="s1" class="monstro5 s1" src="../img/excecoes/fantasmas/m8.gif" style="display: none;"
                    onclick="resposta('0')"></img>
                <img id="s2" class="monstro5 s2" src="../img/excecoes/fantasmas/m8Shy.gif" style="display: none; "
                    onclick="resposta('1')"></img>
                <img id="s3" class="monstro5 s3" src="../img/excecoes/fantasmas/m8.gif" style="display: none; "
                    onclick="resposta('0')"></img>
                <img id="s4" class="monstro5 s4" src="../img/excecoes/fantasmas/m8.gif" style=" display: none; "
                    onclick="resposta('0')"></img>
            </div>


            <div>
                <img id="u1" class="monstro6 u1" src="../img/excecoes/fantasmas/m3.gif" style="display: none;"
                    onclick="resposta('0')"></img>
                <img id="u2" class="monstro6 u2" src="../img/excecoes/fantasmas/m3Shy.gif" style="display: none; "
                    onclick="resposta('1')"></img>
                <img id="u3" class="monstro6 u3" src="../img/excecoes/fantasmas/m3.gif" style="display: none; "
                    onclick="resposta('0')"></img>
                <img id="u4" class="monstro6 u4" src="../img/excecoes/fantasmas/m3.gif" style="display: none; "
                    onclick="resposta('0')"></img>

            </div>

            <div>
                <img id="a1" class="monstro7 a1" src="../img/excecoes/fantasmas/m10.gif" style="display: none;"
                    onclick="resposta('0')"></img>
                <img id="a2" class="monstro7 a2" src="../img/excecoes/fantasmas/m10Shy.gif" style="display: none; "
                    onclick="resposta('1')"></img>
                <img id="a3" class="monstro7 a3" src="../img/excecoes/fantasmas/m10.gif" style="display: none; "
                    onclick="resposta('0')"></img>
                <img id="a4" class="monstro7 a4" src="../img/excecoes/fantasmas/m10.gif" style=" display: none; "
                    onclick="resposta('0')"></img>

            </div>


            <div>
                <img id="r1" class="monstro8 r1" src="../img/excecoes/fantasmas/m9.gif" style="display: none;"
                    onclick="resposta('0')"></img>
                <img id="r2" class="monstro8 r2" src="../img/excecoes/fantasmas/m9Shy.gif" style="display: none; "
                    onclick="resposta('1')"></img>
                <img id="r3" class="monstro8 r3" src="../img/excecoes/fantasmas/m9.gif" style="display: none; "
                    onclick="resposta('0')"></img>
                <img id="r4" class="monstro8 r4" src="../img/excecoes/fantasmas/m9.gif" style=" display: none; "
                    onclick="resposta('0')"></img>

            </div>


            <div>
                <img id="g1" class="monstro9 g1" src="../img/excecoes/fantasmas/m4.gif" style="display: none;"
                    onclick="resposta('0')"></img>
                <img id="g2" class="monstro9 g2" src="../img/excecoes/fantasmas/m4Shy.gif" style="display: none; "
                    onclick="resposta('1')"></img>
                <img id="g3" class="monstro9 g3" src="../img/excecoes/fantasmas/m4.gif" style="display: none; "
                    onclick="resposta('0')"></img>
                <img id="g4" class="monstro9 g4" src="../img/excecoes/fantasmas/m4.gif" style=" display: none; "
                    onclick="resposta('0')"></img>

            </div>


            <div>
                <img id="b1" class="monstro10 b1" src="../img/excecoes/fantasmas/m6.gif"
                    style="right: 200px; display: none; opacity:1;" onclick="resposta('0')"></img>
                <img id="b2" class=" monstro10 b2" src="../img/excecoes/fantasmas/m6Shy.gif"
                    style="right: 100px;  bottom: 50px; display: none; opacity:1;" onclick="resposta('1')"></img>
                <img id="b3" class="monstro10 b3" src="../img/excecoes/fantasmas/m6.gif"
                    style="right: 950px;  bottom: 50px; display: none; opacity:1;" onclick="resposta('0')"></img>
                <img id="b4" class="monstro10 b4" src="../img/excecoes/fantasmas/m6.gif"
                    style=" display: none; opacity:1;" onclick="resposta('0')"></img>

            </div>


            <div class="caixaObjetivos">

                <div class="caixas">
                    <img id="1" class="imagem" src="../img/excecoes/fantasmas/m1.gif"></img>
                </div>
                <div class="caixas">
                    <img id="2" class="imagem" src="../img/excecoes/fantasmas/m2.gif"></img>
                </div>
                <div class="caixas">
                    <img id="3" class="imagem" src="../img/excecoes/fantasmas/m5.gif"></img>
                </div>
                <div class="caixas">
                    <img id="4" class="imagem" src="../img/excecoes/fantasmas/m7.gif"></img>
                </div>
                <div class="caixas">
                    <img id="5" class="imagem" src="../img/excecoes/fantasmas/m8.gif"></img>
                </div>
                <div class="caixas">
                    <img id="6" class="imagem" src="../img/excecoes/fantasmas/m3.gif"></img>
                </div>
                <div class="caixas">
                    <img id="7" class="imagem" src="../img/excecoes/fantasmas/m10.gif"></img>
                </div>
                <div class="caixas">
                    <img id="8" class="imagem" src="../img/excecoes/fantasmas/m9.gif"></img>
                </div>
                <div class="caixas">
                    <img id="9" class="imagem" src="../img/excecoes/fantasmas/m4.gif"></img>
                </div>
                <div class="caixas">
                    <img id="10" class="imagem" src="../img/excecoes/fantasmas/m6.gif"></img>
                </div>
            </div>
        </div>

        <script>

            //bloqueia o arraste de imagens
            const elementosImagens = document.querySelectorAll('img');

            // Itera sobre todas as imagens e define o atributo 'draggable' como 'false'
            elementosImagens.forEach((imagem) => {
                imagem.draggable = false;
            });
            

            for (var i = 1, j = 0; j <= 100; i++) {    //projeta os matos que compoem o cenario
                var img = document.createElement('img');
                img.src = '../img/excecoes/grama.png';
                img.classList.add('mato');
                img.id = 'mato' + i;
                img.style.bottom = "-1%";
                img.style.width = "4%";
                img.style.left = j + "%";
                var body = document.querySelector("body");
                j = j + 3.8;
                body.appendChild(img);
            }

            //captura o id dos monstros que serao exibidos durante a fase
            var cont = 1;
            const monstros1 = document.querySelectorAll(".monstro1");
            const monstros2 = document.querySelectorAll(".monstro2");
            const monstros3 = document.querySelectorAll(".monstro3");
            const monstros4 = document.querySelectorAll(".monstro4");
            const monstros5 = document.querySelectorAll(".monstro5");
            const monstros6 = document.querySelectorAll(".monstro6");
            const monstros7 = document.querySelectorAll(".monstro7");
            const monstros8 = document.querySelectorAll(".monstro8");
            const monstros9 = document.querySelectorAll(".monstro9");
            const monstros10 = document.querySelectorAll(".monstro10");


            //switch para verificar as respostas informadas pelo jogador e projetar na tela o proximo monstro para ser capturado
            const resposta = (shiny) => {
                switch (cont) {
                    case 1:
                        contabilizaSelecao(shiny, 1, monstros1);
                        break;
                    case 2:
                        contabilizaSelecao(shiny, 2, monstros2);
                        break;
                    case 3:
                        contabilizaSelecao(shiny, 3, monstros3);
                        break;
                    case 4:
                        contabilizaSelecao(shiny, 4, monstros4);
                        break;
                    case 5:
                        contabilizaSelecao(shiny, 5, monstros5);
                        break;
                    case 6:
                        contabilizaSelecao(shiny, 6, monstros6);
                        break;
                    case 7:
                        contabilizaSelecao(shiny, 7, monstros7);
                        break;
                    case 8:
                        contabilizaSelecao(shiny, 8, monstros8);
                        break;
                    case 9:
                        contabilizaSelecao(shiny, 9, monstros9);
                        break;
                    case 10:
                        contabilizaSelecao(shiny, 9, monstros10);
                        break;
                    default:
                        break;
                }
            }

            //funcao para limpar tela e contabilizar a captura correta do monstro
            const contabilizaSelecao = (shiny, nivel, idMonstro) => {

                for (var i = 0; i < idMonstro.length; i++) {
                    if (shiny == 1) {
                        document.getElementById(cont).src = "../img/excecoes/visto.webp";
                        cont = cont + 1;
                        limpaTela(idMonstro);
                        exibeTela(cont);

                        if (idMonstro == monstros10) {

                            exibeNotificação("success", "Você concluiu a fase! Vamos as perguntas da fase!", '../Quizes/quizEntreFases.html?fase=6');
                        }
                        return;
                    } else {
                        exibeNotificação("error", "Você capturou o errado! Tente novamente", "");
                        return;

                    }
                }
            }

            //limpa a tela
            const limpaTela = (idMonstro) => {
                for (var i = 0; i < idMonstro.length; i++) {
                    idMonstro[i].style.display = "none";
                }
            }

            //funcao responsavel por exibir o proximo monstro a ser capturado
            const exibeTela = (contador) => {

                for (var i = 0; i < 4; i++) {
                    if (cont == 2) {
                        monstros2[i].style.display = "block";
                    }
                    if (cont == 3) {
                        monstros3[i].style.display = "block";
                    }
                    if (cont == 4) {
                        monstros4[i].style.display = "block";
                    }
                    if (cont == 5) {
                        monstros5[i].style.display = "block";
                    }
                    if (cont == 6) {
                        monstros6[i].style.display = "block";
                    }
                    if (cont == 7) {
                        monstros7[i].style.display = "block";
                    }
                    if (cont == 8) {
                        monstros8[i].style.display = "block";
                    }
                    if (cont == 9) {
                        monstros9[i].style.display = "block";
                    }
                    if (cont == 10) {
                        monstros10[i].style.display = "block";
                    }
                }
            }

            //loop para definir a animacao de opacidade de um dos fantasmas
            const loop = setInterval(() => {

                setTimeout(function () {
                    const m1 = document.getElementById("m1");
                    const m2 = document.getElementById("m2");
                    const m3 = document.getElementById("m3");
                    const m4 = document.getElementById("m4");
                    if (m1.style.opacity == "1") {
                        m1.style.opacity = "0.2";
                        m2.style.opacity = "1";
                        m3.style.opacity = "0.2";
                        m4.style.opacity = "1";
                    } else {
                        m1.style.opacity = "1";
                        m2.style.opacity = "0.2";
                        m3.style.opacity = "1";
                        m4.style.opacity = "0.2";
                    }
                }, 50);

            }, 5000);


            const voltar_menu = () => { //verifica pressionar de tecla de atalho para voltar ao menu de fases
                var tecla = event.keyCode;


                if (tecla == 27) {
                    window.location.href = '../telaInicial/city.html';
                }
            }
            document.addEventListener('keydown', voltar_menu);
        </script>


</body>

</html>