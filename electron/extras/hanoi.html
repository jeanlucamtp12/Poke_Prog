<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/hanoi.css">
    <title>Document</title>
</head>

<body>

    <div class="tela">
        <h1 style="text-align: center; color: aliceblue;">Torre de Hanoi</h1>

        <div class="estaca1">

            <div class="pino1" id="1" ondragover="areaSoltar(event)" ondrop="soltarElemento(event)"></div>


            <div class="Cincopinos">
                <img src="../img/extras/5.gif" ondragstart="itemSelecionado(event)" id="5"></img>
            </div>


            <div class="Quatropinos">
                <img src="../img/extras/4.gif" ondragstart="itemSelecionado(event)" id="4"></img>
            </div>


            <div class="Trespinos">
                <img src="../img/extras/3.gif" ondragstart="itemSelecionado(event)" id="3"></img>
            </div>



            <div class="Doispinos">
                <img src="../img/extras/2.gif" ondragstart="itemSelecionado(event)" id="2"></img>
            </div>



            <div class="Umpino">
                <img src="../img/extras/1.gif" ondragstart="itemSelecionado(event)" id="1"></img>
            </div>


        </div>




        <div class="estaca2">
            <div class="pino2" id="2" ondragover="areaSoltar(event)" ondrop="soltarElemento(event)"></div>




            <div class="Cincopinos2">

            </div>



            <div class="Quatropinos2">

            </div>



            <div class="Trespinos2">

            </div>



            <div class="Doispinos2">

            </div>



            <div class="Umpino2">

            </div>


        </div>
        <div class="estaca3">
            <div class="pino3" id="3" ondragover="areaSoltar(event)" ondrop="soltarElemento(event)"></div>




            <div class="Cincopinos3">

            </div>



            <div class="Quatropinos3">

            </div>



            <div class="Trespinos3">

            </div>



            <div class="Doispinos3">

            </div>



            <div class="Umpino3">

            </div>


         
        </div>



</body>

</html>


<script>
    var estaca1 = 5;
    var estaca2 = 0;
    var estaca3 = 0;
    var classeImagem = "";

    const decrementarEstacas = (classeImagem) => {



       // console.log("Estaca1: "+estaca1+ " Estaca2: "+estaca2);
        if (classeImagem.includes('2')) {
            estaca2 = estaca2 - 1;

        } else if (classeImagem.includes('3')) {
            estaca3 = estaca3 - 1;           

        } else {
            estaca1 = estaca1 - 1;             

        }
    }

    const moveMoagnemite = (pino, slot, imagem) => {


        if (pino == "estaca2"){
            var div = document.querySelector("."+slot + "2");
        }else if (pino == "estaca3"){
            var div = document.querySelector("."+slot + "3");
        }else{
            var div = document.querySelector("."+slot);
        }
        
        var img = document.createElement('img');
        img.src = "../img/extras/" + imagem + ".gif";

        if( imagem == "1"){
            img.style.width = "25%";
            img.style.marginLeft = "38%";
 
        }else if( imagem == "2"){
            img.style.width = " 50%";
            img.style.marginLeft = "25%";
        }else if( imagem == "3"){
            img.style.width = "70%";
            img.style.marginLeft = "15%";
        }else if ( imagem == "4"){
            img.style.width = "90%";
            img.style.marginLeft = "5%";
        }else{
            img.style.width = "100%";
            img.style.marginLeft = "0%";
        }
        
       



        div.appendChild(img);




    }
    const verificaEstaca = (estaca, imagem, pino) => {


        switch (estaca) {
            case 0:
                moveMoagnemite(pino, 'Cincopinos', imagem);
                break;
            case 1:
                moveMoagnemite(pino, 'Quatropinos', imagem);
                break;
            case 2:
                moveMoagnemite(pino, 'Trespinos', imagem);
                break;
            case 3:
                moveMoagnemite(pino, 'Doispinos', imagem);
                break;
            case 4:
                moveMoagnemite(pino, 'Umpino', imagem);
                break;
            case 5:
                window.alert("Esse pino estÃ¡ cheio");
                break;
        }

    }






    const itemSelecionado = (event) => {
        event.dataTransfer.setData("img", event.target.id);

        //classe = event.dataTransfer.setData("img", event.target.parentNode.id);
        classe = (("img", event.target.parentNode.className));

    }

    const areaSoltar = (event) => {
        event.preventDefault();


    }

    const soltarElemento = (event) => {
        event.preventDefault();

        var imagem = event.dataTransfer.getData("img");

        //var classe = event.dataTransfer.setData("img", event.target.parentNode.id);
        

        //var idImagem = imagem.slice(-1);
        //var classeImagem = imagem.charAt(0);




        /* const element = document.getElementById(idImagem);*/

        var pino = event.target.id;
        pino = "estaca" + pino;


        var blocos = document.querySelectorAll("div." + pino + " #slot1, div." + pino + " #slot2, div." + pino + " #slot3, div." + pino + " #slot4, div." + pino + " #slot5");



        if (pino == "estaca1") {
            if ((estaca1 => 0) && (estaca1 < 5)) {
                verificaEstaca(estaca1, imagem, pino);
                estaca1 = estaca1 + 1; console.log("entrei "+estaca1);
                decrementarEstacas(classeImagem);
            } else {
                window.alert("Pino indisponivel");
            }

        } else if (pino == "estaca2") {
            if ((estaca2 => 0) && (estaca2 < 5)) {
                verificaEstaca(estaca2, imagem, pino);
                estaca2 = estaca2 + 1;
                decrementarEstacas(classeImagem, estaca2);
            } else {
                window.alert("Pino indisponivel");
            }
        } else {
            if ((estaca3 => 0) && (estaca3 < 5)) {
                verificaEstaca(estaca3, imagem, pino);
                estaca3 = estaca3 + 1;
                decrementarEstacas(classeImagem, estaca3);
            } else {
                window.alert("Pino indisponivel");
            }
        }









    }
</script>