<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="../css/city.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../telaInicial/dialogos.js"></script>

    <title>Document</title>
</head>

<body>

    <audio id="audio" src="../sounds/home.mp3" loop autoplay></audio>



    <div style="display: none;" id="telaTransparente"></div>

    <div id="imagensFases">
        <img style="display: none;" id="img1" src="../img/home/alfabeto.png"></img>
        <img style="display: none;" id="img2" src="../img/home/academia.png"></img>
        <img style="display: none;" id="img3" src="../img/home/loopPonte.png"></img>
        <img style="display: none;" id="img4" src="../img/home/array.png"></img>
        <img style="display: none;" id="img5" src="../img/home/funcoes.png"></img>
        <img style="display: none;" id="img6" src="../img/home/excecoes.png"></img>
        <img style="display: none;" id="img7" src="../img/home/usina.png"></img>
        <img style="display: none;" id="img8" src="../img/home/victiniVitoria.png"></img>
    </div>


    <div id="introducao" style="display: none;">
        <img class="professor" src="../img/home/Fran.png">
        <div class="balao">
            <div id="caixaDialogo">
                <h4 id="dialogo"></h4>
            </div>
            <button id="botao" onclick="exibirTexto()">Avançar</button>
            <button id="botao2" onclick="iniciar()">Iniciar</button>

        </div>
    </div>


    <div class="home" onclick="window.location.href='./telaInicial/index.html'">
        <img src="../img/home/home.png"><img>
    </div>

    <h1 class="titulo">Seleção de Fase</h1>

    <div class="mapa" style="opacity: 1;">

        <div>
            <img class="parede1" src="../img/home/asfauto.png">
            <img class="parede2" src="../img/home/asfauto.png">
            <img class="parede3" src="../img/home/asfauto.png">
        </div>

        <div>
            <img class="bloco1" src="../img/home/asfauto.png">
            <img class="bloco2" src="../img/home/asfauto.png">
            <img class="bloco3" src="../img/home/asfauto.png">
        </div>



        <div style="cursor: pointer;" onclick="iniciarFase(1)">
            <h1 id="fase1">Fase 1 <br>Industria das variaveis</h1>
            <img id="fabrica" src="../img/home/fabrica.png"></a>

            <img id="a" src="../img/unowns/a.gif">
            <img id="b" src="../img/unowns/b.gif">
            <img id="c" src="../img/unowns/c.gif">
            <img id="d" src="../img/unowns/d.gif">
            <img id="e" src="../img/unowns/e.gif">
            <img id="f" src="../img/unowns/f.gif">
            <img id="g" src="../img/unowns/g.gif">
        </div>


        <div style="cursor: pointer;" onclick="iniciarFase(2)">
            <h1 id="fase2">Fase 2 <br>Escola das decisões</h1>
            <img id="escola" src="../img/home/escola.png"></a>
            <img id="bulbassaur" src="../img/home/bulbassaur.png">
            <img id="arbok" src="../img/home/arbok.png">
        </div>




        <div style="cursor: pointer;" onclick="iniciarFase(3)">
            <h1 id="fase3">Fase 3 <br>Lago repetição</h1>
            <img id="nuvem3" src="../img/home/nuvem1.png"></a>
            <img id="rio" src="../img/home/rio.png"></a>
            <img id="timburr" src="../img/repeticao/timburr.png">
        </div>


        <div style="cursor: pointer;" onclick="iniciarFase(4)">
            <h1 id="fase4">Fase 4 <br>Bosque dos Arrays</h1>
            <img id="nuvem1" src="../img/home/nuvem1.png"></a>
            <img id="nuvem2" src="../img/home/nuvem2.png"></a>
            <img id="bosque" src="../img/home/bosque.png"></a>
            <img id="falinks1" src="../img/arrays/falink.gif">
            <img id="falinks2" src="../img/arrays/falink.gif">
            <img id="falinks3" src="../img/arrays/falink.gif">
            <img id="falinks4" src="../img/arrays/falink_direita.gif">
            <img id="falinks5" src="../img/arrays/falink_direita.gif">
            <img id="falinks6" src="../img/arrays/falink_direita.gif">
        </div>


        <div style="cursor: pointer;" onclick="iniciarFase(5)">
            <h1 id="fase5">Fase 5 <br>Casa das funções</h1>
            <img id="casa" src="../img/home/casa.png"></a>
            <img id="rotom" src="../img/funcoes/rotom.png">
            <img id="cortador" src="../img/funcoes/cortador.png">
            <img id="geladeira" src="../img/funcoes/geladeira.png">
            <img id="forno" src="../img/funcoes/forno.png">
            <img id="ventilador" src="../img/funcoes/ventilador.png">
            <img id="lavadeira" src="../img/funcoes/lavadeira.png">
        </div>


        <div style="cursor: pointer;" onclick="iniciarFase(6)">
            <h1 id="fase6">Fase 6 <br>Misterios das Exceções</h1>
            <img id="cemiterio1" src="../img/home/cemiterio1.png"></a>
            <img id="cemiterio2" src="../img/home/cemiterio2.png"></a>
            <img id="gasly1" src="../img/excecoes/fantasmas/gasly_shiny.png">
            <img id="gasly2" src="../img/excecoes/fantasmas/gasly.png">
            <img id="gasly3" src="../img/excecoes/fantasmas/gasly.png">
            <img id="gasly4" src="../img/excecoes/fantasmas/gasly.png">
        </div>



        <div style="cursor: pointer;" onclick="iniciarFase(7)">
            <h1 id="fase7">Fase 7 <br>Usina Recursiva</h1>
            <img id="predio1" src="../img/home/predio.png"></a>
            <img id="predio2" src="../img/home/predio2.png"></a>
            <img id="magnemite1" src="../img/extras/magnemite.png">
            <img id="magnemite2" src="../img/extras/magnemite2.png">
            <img id="magneton1" src="../img/extras/magneton.png">
            <img id="magneton2" src="../img/extras/magneton2.gif">
        </div>


        <div style="cursor: pointer;" onclick="iniciarFase(8)">
            <h1 id="fase8">Fase 8 <br>Desafio da Vitória</h1>
            <img id="trofeu" src="../img/home/trofeu.png"></a>
            <img id="victini1" src="../img/home/victini.png">
            <img id="victini2" src="../img/home/victini.png">
        </div>



    </div>


</body>

</html>

<script>

    var url = new URLSearchParams(window.location.search);  //pega o id para exibir o dialogo de encerramento, caso seja passado pela url 
    var idEncerramento = url.get('id');
    var idEncerramento = parseInt(idEncerramento);

    var dialogo = textos[0];     //declaracao de variaveis que serao utilizadas no menu de selecao
    var aux = 0;
    var verificaClick = "false";
    var fase = 0;

    function escreveDialogo() {   //funcao para escrever os dialogos da personagem Fran na tela do jogador
        if (verificaClick == "false") {
            if (aux < dialogo.length) {
                document.getElementById("dialogo").textContent += dialogo.charAt(aux);
                aux++;
                setTimeout(escreveDialogo, 100);

            }
        }
    }

    function exibirTexto() {    //funcao para exibir os textos apresentados pela personagem Fran 
        verificaClick = "true";
        document.getElementById("dialogo").innerHTML = textos[fase];
    }

    function iniciar() { //funcao para iniciar a fase correspondente ao dialogo apresentado

        if(document.getElementById("botao2").innerHTML == "Finalizar"){
            window.location.href = './telaInicial/city.html';
        }

        document.getElementById("introducao").style.display = "none";
        document.querySelector(".mapa").style.opacity = "1";
        document.getElementById("telaTransparente").style.display = "none";
    }

    function iniciarFase(val) {   //funcao chamada quando o usuario clica em uma fase, dialogo e imagens correpondetes sao apresentadas

        fase = val;

        aux = 0;
        verificaClick = "false";
        dialogo = textos[val];

        document.getElementById("dialogo").textContent = "";

        document.querySelector(".titulo").style.display = "none";
        document.getElementById("introducao").style.display = "block";
        document.getElementById("telaTransparente").style.display = "block";
        document.querySelector(".mapa").style.opacity = "0.2";

        if (val == 9) {
            escreveDialogo(val);
            criarSom(val);
            return;
        }

        criarSom(val);
        escreveDialogo(val);
        exibeImagem(val);

        document.getElementById("botao2").addEventListener("click", function () {
            if (val == 1) {
                window.location.href = '../variaveis/caixas.html';
            } else if (val == 2) {
                window.location.href = '../decisao/decisao.html';
            } else if (val == 3) {
                window.location.href = '../repeticao/repeticao.html';
            } else if (val == 4) {
                window.location.href = '../arrays/arrays.html';
            } else if (val == 5) {
                window.location.href = '../funcoes/funcoes.html';
            } else if (val == 6) {
                window.location.href = '../excecoes/excecoes.html';
            } else if (val == 7) {
                window.location.href = '../extras/hanoi.html';
            } else {
                window.location.href = '../Quizes/quiz.html';
            }
            document.getElementById("img" + val).style.display = "block";
        });

    }

    function exibeImagem(val) {  //exibe a imagem caracteristica da fase
        document.getElementById("img" + val).style.display = "block";

    }

    const criarSom = (valor) => { //funcao para projetar a fala da personagem Fran correspondente a fase selecionada

        var som = new Audio();
        som.src = '../sounds/vozes/fase' + valor + '.mp3';
        document.body.appendChild(som);

        document.getElementById('audio').volume = 0.2;
        som.play();
    }

    if (idEncerramento == 1) { //exibe o dialogo final do jogo, sagrando o jogador como campeao
        document.getElementById("botao2").innerHTML = "Finalizar";
        iniciarFase(9);
    }


</script>
