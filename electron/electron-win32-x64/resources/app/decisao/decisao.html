<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
        <script src="../sweetalert/sweetalert.js"></script>
        <script src="../telaInicial/dialogos.js"></script>
        

    <link rel="stylesheet" href="../css/decisao.css">


    <title>Document</title>
</head>

<body>

    <audio id="audio" src="../sounds/decisao.mp3" loop autoplay></audio>


    <div class="arena">


        <div class="grass"></div>

        <img class="nuvens" src="../img/decisao/clouds.png">
        <img class="nuvens2" src="../img/decisao/clouds.png">


        <img class="jogador" src="../img/decisao/menino.png"> </img>

        <div>
            <img class="poke" src="../img/decisao/bulba.png">
            <img class="base" src="../img/decisao/base.png">

            <div class="barraVida" id="barraVida">
                <div id="barra1"></div>
                <div id="barra2"></div>
                <div id="barra3"></div>
                <div id="barra4"></div>
                <div id="barra5"></div>
            </div>
        </div>

        <div id="inimigo1" style="display: block;">
            <img class="pokeAdversario" src="../img/decisao/arbok.gif">
            <div id="barraVidaAdversario" class="barraVidaAdversario">
                <div id="barraA1"></div>
                <div id="barraA2"></div>
                <div id="barraA3"></div>
                <div id="barraA4"></div>
            </div>
            <img class="ataqueVeneno" id="ataqueVeneno" src="../img/decisao/ataqueVeneno.gif" style="display:none">
            </img>
            <img class="adversario" src="../img/decisao/adversario.png"> </img>
        </div>


        <div id="inimigo2" style="display: none;">
            <img class="pokeAdversario2" src="../img/decisao/jigglypuff.png">
            <img class="pokeAdversario3" src="../img/decisao/wigglytuff.png">
            <img class="base2" src="../img/decisao/base.png">
            <img class="base3" src="../img/decisao/base.png">
            <img class="adversario2" src="../img/decisao/treinador2.png">
            <img class="ataqueFada" id="ataqueFada" src="../img/decisao/ataqueJiggly.png" style="display:none"> </img>



            <div id="barraVidaAdversario2" class="barraVidaAdversario2">
                <div id="barraA2_1"></div>
                <div id="barraA2_2"></div>
                <div id="barraA2_3"></div>
                <div id="barraA2_4"></div>
            </div>

            <div id="barraVidaAdversario3" class="barraVidaAdversario3">
                <div id="barraA3_1"></div>
                <div id="barraA3_2"></div>
                <div id="barraA3_3"></div>
                <div id="barraA3_4"></div>
            </div>

        </div>


        <div id="inimigo4" style="display: none;">
            <img class="pokeAdversario4" src="../img/decisao/garchomp.png">
            <img class="base4" src="../img/decisao/base.png">
            <img class="adversario4" src="../img/decisao/cynthia.png">

            <img class="ataqueDragao" id="ataqueDragao" src="../img/decisao/ataqueDragao.gif" style="display:none">
            </img>



            <div id="barraVidaAdversario4" class="barraVidaAdversario4">
                <div id="barraA4_1"></div>
                <div id="barraA4_2"></div>
                <div id="barraA4_3"></div>
                <div id="barraA4_4"></div>
                <div id="barraA4_5"></div>
            </div>



        </div>




        <div>
            <h3 id="ajuda">Ajuda</h3>
            <img class="lampent" src="../img/decisao/lampent.png" onclick="abrirAjuda()" style="cursor: pointer;">
            </img>

            <div class="abrirAjuda" style="display: none;">
                <img id="imagemAjuda" src="../img/decisao/complemento.jpg"></img>
            </div>
        </div>



        <img class="ataqueGrama" id="ataqueGrama" src="../img/decisao/ataqueGrama.png" style="display:none"> </img>



        <div class="form" id="form" method="GET" enctype='multipart/form-data'>

            <form>
                <div>
                    <label id="nome" for="nome"> Se 1 > 2?</label>
                    <input type="text" class="form-control" id="resposta">
                    <!-- <img src="../img/decisao/complemento.jpg" style="width: 25vw;"></img> -->
                    <button>Enviar</button>
                </div>
            </form>

        </div>


    </div>






</body>

</html>

<script>






    var vidaJ = 5;
    var vidaI1 = 4;
    var vidaI2 = 4;
    var vidaI4 = 5;
    var popUp = "false";



    var j = 0;
    for (var i = 1; j <= 100; i++) {


        var img = document.createElement('img');
        img.src = '../img/decisao/mato.png';
        img.classList.add('mato');
        img.id = 'mato' + i;
        img.style.bottom = "0%";
        img.style.width = "4%";
        img.style.left = j + "%";

        var body = document.querySelector("body");
        j = j + 3.8;

        body.appendChild(img);

    }

    var i = 1;
    var jogador = 0;
    var adversario = 0;


    const realizaAtaque = (resposta) => {

        if (resposta == "grama") {

            document.getElementById("ataqueGrama").style.display = "block";
            setTimeout(function () {
                pararAnimacao(1)
            }, 600);
        } else {
            if (vidaI1 == 0 && vidaI2 > 0) {
                document.getElementById("ataqueFada").style.display = "block";
                setTimeout(function () {
                    pararAnimacao(2)
                }, 1100);
            }else if(vidaI1 == 0 && vidaI2 == 0){
                document.getElementById("ataqueDragao").style.display = "block";
                setTimeout(function () {
                    pararAnimacao(3)
                }, 1100);
            } 
            
            else{
                document.getElementById("ataqueVeneno").style.display = "block";
                setTimeout(function () {
                    pararAnimacao(4)
                }, 1000);
            }

        }
    }

    $('#form').submit(function (evento) { //utilização de ajax para realizar o envio do form sem atualizar a pagina 

        evento.preventDefault();

        var resposta = $('#resposta').val();

        $.ajax({

            url: 'decisao.html',
            method: 'GET',

            data: {
                Resposta: resposta
            }


        }).done(function (result) {

            switch (i) {
                case 1:
                    if (resposta == "nao" || resposta == "falso" || resposta == "n") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Se 26, 24, 20, 18, 14,... Qual é o próximo?';
                    i = i + 1;
                    break;
                case 2:
                    if (resposta == "12") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = ' O valor de pi é aproximadamente 3,131415...?';
                    i = i + 1;
                    break;
                case 3:
                    if (resposta == "sim" || resposta == "verdade" || resposta == "s") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Se 20 == 25?';
                    i = i + 1;
                    break;
                case 4:
                    if (resposta == "nao" || resposta == "falso" || resposta == "n") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Leandro tem 40 balas chupou 12 e deu 10 para sua irmã. <br>Quantas balas ele tem?';
                    i = i + 1;
                    break;

                case 5:
                    if (resposta == "18") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Quantos números 1 eu tenho de 1 até 191?';
                    i = i + 1;
                    break;
                case 6:
                    if (resposta == "132") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Quanto é o dobro 1500?';
                    i = i + 1;
                    break;
                case 7:
                    if (resposta == "3000") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Se DELTA= b^2-4.a.c, essa informação <br>é verdadeira ou falsa?';
                    i = i + 1;
                    break;
                case 8:
                    if (resposta == "verdadeira" || resposta == "verdade" || resposta == "v") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Quantos planetas existem no sistema solar?';
                    i = i + 1;
                    break;

                case 9:
                    if (resposta == "8") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Quantos meses têm 28 dias?';
                    i = i + 1;
                    break;
                case 10:
                    if (resposta == "12") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'A Lua é maior que a Terra?';
                    i = i + 1;
                    break;





                case 11:
                    if (resposta == "nao" || resposta == "n" || resposta == "falso") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Os golfinhos são peixes?';
                    i = i + 1;
                    break;

                case 12:
                    if (resposta == "nao" || resposta == "n" || resposta == "falso") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = '12 dividido por 3 é igual a 4?';
                    i = i + 1;
                    break;
                case 13:
                    if (resposta == "sim" || resposta == "verdade" || resposta == "s") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = '6 x 4 é igual a 24? ';
                    i = i + 1;
                    break;
                case 14:
                    if (resposta == "sim" || resposta == "verdade" || resposta == "s") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'O Sol é uma estrela? ';
                    i = i + 1;
                    break;
                case 15:
                    if (resposta == "sim" || resposta == "verdade" || resposta == "s") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'A pizza surgiu na França? ';
                    i = i + 1;
                    break;
                case 16:
                    if (resposta == "não" || resposta == "falso" || resposta == "n") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Os pandas são animais carnívoros? ';
                    i = i + 1;
                    break;
                case 17:
                    if (resposta == "nao" || resposta == "n" || resposta == "falso") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Quantos oceanos existem na Terra?';

                    i = i + 1;
                    break;
                case 18:
                    if (resposta == "5") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Quantos centavos existem em uma moeda de um real?';
                    i = i + 1;
                    break;
                case 19:
                    if (resposta == "100") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    document.getElementById('nome').innerHTML = 'Quantos zeros há em um milhão?';
                    i = i + 1;
                    break;
                case 20:
                    if (resposta == "6") {
                        realizaAtaque("grama");
                        jogador = jogador + 1;
                    } else {
                        realizaAtaque("veneno");
                        adversario = adversario + 1;
                    }
                    i = i + 1;
                    break;





            }

            

            if (jogador == 13) {
                setInterval(function () {
                    if(popUp == "false"){
                        exibeNotificação("success", "Você concluiu a fase! Vamos as perguntas da fase!", "http://localhost/jogo/electron/Quizes/quizEntreFases.html?fase=2");

                        //exibeNotificação("success", "Você concluiu a fase! Clique para voltar ao Mapa da Cidade", "http://localhost/jogo/electron/telaInicial/city.html");
                        popUp = "true";
                    }
                }, 2000);

            } else if (adversario == 5) {
                setInterval(function () {
                    if(popUp == "false"){
                        exibeNotificação("error", "Você perdeu! Clique para tentar novamente!", "http://localhost/jogo/electron/decisao/decisao.html");
                        popUp = "true";
                    }
                }, 2000);
            }

        });
    });

    const pararAnimacao = (id) => {


        if (id == 1) {

            document.getElementById("ataqueGrama").style.display = "none";
            //$('#barraVidaAdversario').width("150px");


            if (vidaI1 == 0 && vidaI2 > 0) {
                document.getElementById("barraA2_" + vidaI2).remove();
                document.getElementById("barraA3_" + vidaI2).remove();
                vidaI2 = vidaI2 - 1;

            } else if(vidaI1 == 0 && vidaI2 == 0){
                document.getElementById("barraA4_" + vidaI4).remove();
                vidaI4 = vidaI4 - 1;
            }
            else {
                document.getElementById("barraA" + vidaI1).remove();
                vidaI1 = vidaI1 - 1;
            }

            if (vidaI1 == 0 && vidaI2 > 0) {

                setInterval(function () {
                    if(vidaI2 == 4){
                        document.querySelector("#inimigo1").style.display = "none";
                        document.querySelector("#inimigo2").style.display = "block";
                        document.body.style.background = 'linear-gradient(#9c26e0, #98c6ac) no-repeat';
                    }
                }, 1000);
            }

            if (vidaI2 == 0 && vidaI4 == 5) {
                setInterval(function () {
                    document.querySelector("#inimigo2").style.display = "none";
                    document.querySelector("#inimigo4").style.display = "block";
                    document.body.style.background = 'linear-gradient(#000000, #5d7c6b) no-repeat';
                }, 1000);
                document.querySelector("#audio").src = "../sounds/cynthia.mp3"
            }




        } else if (id == 4) {
            document.getElementById("ataqueVeneno").style.display = "none";
            //$('#barraVidaAdversario').width("150px");


            document.getElementById("barra" + vidaJ).remove();
            vidaJ = vidaJ - 1;

        } else if(id == 2){
            document.getElementById("ataqueFada").style.display = "none";
            //$('#barraVidaAdversario').width("150px");

            document.getElementById("barra" + vidaJ).remove();
            vidaJ = vidaJ - 1;
        }else{
            document.getElementById("ataqueDragao").style.display = "none";
            //$('#barraVidaAdversario').width("150px");

            document.getElementById("barra" + vidaJ).remove();
            vidaJ = vidaJ - 1;
        }
         

        


    }



    const abrirAjuda = () => {

        if (document.querySelector(".abrirAjuda").style.display == "block") {
            document.querySelector(".abrirAjuda").style.display = "none";
        } else {
            document.querySelector(".abrirAjuda").style.display = "block"
        }
    }


    const voltar_menu = () => {
            var tecla = event.keyCode;
            if (tecla == 27) {
                window.location.href = "http://localhost/jogo/electron/telaInicial/city.html";
            }
        }
    document.addEventListener('keydown', voltar_menu);



</script>